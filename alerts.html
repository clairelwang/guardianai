<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Guardian AI ‚Äì Community Scam Alerts</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#64748b;
      --line:#e5e7eb;

      --urgent:#ef4444;
      --urgent-bg:#fff1f2;

      --warning:#f97316;
      --warning-bg:#fff7ed;

      --advisory:#3b82f6;
      --advisory-bg:#eff6ff;

      --verified:#16a34a;
      --shadow: 0 18px 35px rgba(2,6,23,.08);
      --shadow-soft: 0 10px 20px rgba(2,6,23,.06);

      --radius:16px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:"Nunito", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:#fff;
    }
    a{ color:inherit; text-decoration:none; }

    /* ===================== TOP NAV (FROM index.html) ===================== */
    .top-nav{
      position: sticky;
      top: 0;
      z-index: 9998;
      background: rgba(255,255,255,.88);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(226,232,240,.9);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .top-nav .nav-inner{
      max-width: 1200px;
      margin: 0 auto;
      padding: 14px 18px;
      display: flex;
      align-items: center;
      gap: 16px;
    }
    .nav-brand{
      display:flex;
      align-items:center;
      gap:12px;
      font-weight:900;
      letter-spacing:-.01em;
      color:#0b1220;
      min-width: 180px;
    }
    .nav-logo{
      width:42px;height:42px;
      border-radius:14px;
      background: rgba(110,231,184,.14);
      border:1px solid rgba(110,231,184,.34);
      display:grid;place-items:center;
      color:#065f46;
    }
    .nav-title{
      display:flex;
      flex-direction:column;
      line-height:1.05;
    }
    .nav-title strong{ font-size:15px; }
    .nav-title span{
      font-size:12px;
      color:#64748b;
      font-weight:700;
      margin-top:2px;
    }

    .nav-links{
      display:flex;
      align-items:center;
      gap: 6px;
      flex: 1;
      justify-content: center;
    }
    .nav-links a{
      font-weight:800;
      font-size:13px;
      color:#0b1220;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid transparent;
      transition: .15s ease;
      white-space: nowrap;
    }
    .nav-links a:hover{
      background: rgba(15,23,42,.06);
      border-color: rgba(15,23,42,.06);
    }
    .nav-links a.active{
      background: rgba(52,211,153,.18);
      border-color: rgba(52,211,153,.40);
      color:#065f46;
    }

    .nav-actions{
      display:flex;
      align-items:center;
      gap:10px;
      justify-content:flex-end;
      min-width: 230px;
    }
    .nav-btn{
      height:42px;
      padding: 0 14px;
      border-radius: 12px;
      font-weight:900;
      font-size:13px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border: 1px solid rgba(15,23,42,.10);
      background: #fff;
      color:#0b1220;
      cursor:pointer;
      transition: .15s ease;
      white-space: nowrap;
      font-family: inherit;
    }
    .nav-btn:hover{ background: rgba(15,23,42,.04); }
    .nav-btn.primary{
      background: #0b1220;
      border-color: #0b1220;
      color:#fff;
    }
    .nav-btn.primary:hover{ filter: brightness(1.05); }

    .nav-toggle{
      display:none;
      width:44px;height:44px;
      border-radius: 14px;
      border: 1px solid rgba(15,23,42,.10);
      background: #fff;
      cursor:pointer;
      margin-left:auto;
    }
    .nav-toggle span{
      display:block;
      width:18px;height:2px;
      background:#0b1220;
      margin: 4px auto;
      border-radius:99px;
    }

    .nav-mobile{
      display:none;
      border-top:1px solid rgba(226,232,240,.9);
      background: rgba(255,255,255,.92);
    }
    .nav-mobile .nav-mobile-inner{
      max-width: 1200px;
      margin: 0 auto;
      padding: 10px 18px 14px;
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .nav-mobile a{
      font-weight:900;
      font-size:14px;
      padding:12px 12px;
      border-radius: 14px;
      background: rgba(15,23,42,.04);
      border: 1px solid rgba(15,23,42,.06);
    }
    .nav-mobile a.active{
      background: rgba(52,211,153,.18);
      border-color: rgba(52,211,153,.40);
      color:#065f46;
    }
    .nav-mobile .row{
      display:flex;
      gap:10px;
      margin-top:6px;
    }
    .nav-mobile .row .nav-btn{
      flex:1;
      height:46px;
      border-radius: 14px;
    }

    @media (max-width: 980px){
      .nav-links{ display:none; }
      .nav-actions{ display:none; }
      .nav-toggle{ display:block; }
      .nav-brand{ min-width: unset; }
      .top-nav .nav-inner{ padding: 12px 16px; }
      .nav-mobile{ display:block; }
      .nav-mobile[hidden]{ display:none; }
    }
    /* ===================== END TOP NAV ===================== */

    /* ===== Page layout ===== */
    .page{
      min-height:100vh;
      background:var(--bg);
      padding:52px 24px 80px; /* reduced because top-nav exists */
    }
    .container{
      width:min(1040px, 100%);
      margin:0 auto;
    }

    .topIcon{
      width:52px;
      height:52px;
      margin:0 auto 10px;
      border-radius:16px;
      background:#fff3e6;
      border:1px solid #f7d9b8;
      display:grid;
      place-items:center;
      color:var(--warning);
      box-shadow: var(--shadow-soft);
    }
    .title{
      text-align:center;
      font-size:40px;
      margin:0;
      font-weight:800;
      letter-spacing:-.02em;
    }
    .subtitle{
      text-align:center;
      margin:10px auto 0;
      max-width:700px;
      color:var(--muted);
      font-size:18px;
      line-height:1.55;
    }

    /* stats */
    .statsRow{
      margin:34px auto 22px;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:18px;
      width:min(860px, 100%);
    }
    .statCard{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:14px;
      box-shadow: var(--shadow-soft);
      padding:18px 16px;
      text-align:center;
    }
    .statNum{
      font-size:30px;
      font-weight:900;
      margin:0;
      line-height:1;
    }
    .statLabel{
      margin:6px 0 0;
      color:var(--muted);
      font-size:14px;
      font-weight:700;
    }
    .urgentStat{ background: #fff1f2; border-color:#fecdd3; }
    .warnStat{ background: #fff7ed; border-color:#fed7aa; }
    .advStat{ background: #eff6ff; border-color:#bfdbfe; }

    .urgentStat .statNum{ color:var(--urgent); }
    .warnStat .statNum{ color:var(--warning); }
    .advStat .statNum{ color:var(--advisory); }

    /* search row */
    .searchRow{
      width:min(900px, 100%);
      margin:18px auto 18px;
      display:grid;
      grid-template-columns: 1fr 210px;
      gap:16px;
      align-items:center;
    }
    .searchBox{
      background:#fff;
      border:1px solid var(--line);
      border-radius:12px;
      padding:14px 14px;
      display:flex;
      align-items:center;
      gap:10px;
      box-shadow: var(--shadow-soft);
    }
    .searchBox input{
      border:none;
      outline:none;
      font-family:inherit;
      width:100%;
      font-size:15px;
      color:var(--text);
    }
    .searchIcon{
      width:18px;height:18px;
      stroke:#9ca3af; fill:none; stroke-width:2;
      stroke-linecap:round; stroke-linejoin:round;
      flex:0 0 auto;
    }

    .btnOrange{
      height:52px;
      border-radius:12px;
      border:none;
      background: var(--warning);
      color:#fff;
      font-weight:800;
      font-family:inherit;
      font-size:15px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      cursor:pointer;
      box-shadow: 0 16px 26px rgba(249,115,22,.22);
      transition:transform .08s ease, filter .15s ease;
    }
    .btnOrange:active{ transform: translateY(1px); }
    .btnOrange[disabled]{ opacity:.7; cursor:not-allowed; }
    .spinner{
      width:16px;height:16px;border-radius:999px;
      border:2px solid rgba(255,255,255,.45);
      border-top-color:#fff;
      animation:spin .8s linear infinite;
    }
    @keyframes spin{ to{ transform:rotate(360deg);} }

    /* blue resources bar */
    .resourcesBar{
      width:min(980px, 100%);
      margin:16px auto 18px;
      background: linear-gradient(90deg, #2563eb, #1d4ed8);
      color:#fff;
      border-radius:14px;
      padding:18px 18px;
      box-shadow: 0 18px 35px rgba(37,99,235,.22);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      border:1px solid rgba(255,255,255,.18);
    }
    .resourcesLeft h3{
      margin:0;
      font-weight:900;
      letter-spacing:-.01em;
    }
    .resourcesLeft p{
      margin:6px 0 0;
      opacity:.9;
      font-weight:600;
      font-size:14px;
    }
    .resourcesRight{
      display:flex;
      align-items:center;
      gap:12px;
    }
    .btnWhite{
      background:#fff;
      color:#1d4ed8;
      border:none;
      border-radius:10px;
      padding:10px 14px;
      font-family:inherit;
      font-weight:900;
      cursor:pointer;
      display:flex;
      align-items:center;
      gap:10px;
      box-shadow: 0 12px 22px rgba(2,6,23,.16);
      white-space:nowrap;
      transition:transform .08s ease;
    }
    .btnWhite:active{ transform: translateY(1px); }

    /* filter tabs */
    .tabsWrap{
      width:min(980px, 100%);
      margin:0 auto 16px;
      background:#fff;
      border:1px solid var(--line);
      border-radius:12px;
      padding:8px;
      display:flex;
      gap:10px;
      align-items:center;
      box-shadow: var(--shadow-soft);
      flex-wrap:wrap;
    }
    .tab{
      border:none;
      background:transparent;
      color:#475569;
      font-weight:900;
      font-family:inherit;
      padding:8px 12px;
      border-radius:10px;
      cursor:pointer;
      font-size:14px;
    }
    .tab.active{
      background:#fff;
      color:#111827;
      outline:2px solid #111827;
      outline-offset:-2px;
    }

    /* alerts list */
    .list{
      width:min(980px, 100%);
      margin:0 auto;
      display:flex;
      flex-direction:column;
      gap:18px;
    }
    .alertCard{
      position:relative;
      background:#fff;
      border:1px solid var(--line);
      border-radius:14px;
      box-shadow: var(--shadow);
      padding:18px 18px 16px;
      overflow:hidden;
    }
    .alertCard:before{
      content:"";
      position:absolute;
      left:0;
      top:0;
      bottom:0;
      width:4px;
      border-radius:14px 0 0 14px;
      background: var(--urgent);
    }
    .alertCard.warning:before{ background: var(--warning); }
    .alertCard.advisory:before{ background: var(--advisory); }

    .alertTop{
      display:grid;
      grid-template-columns: 28px 1fr;
      gap:12px;
      align-items:flex-start;
    }
    .emoji{
      font-size:22px;
      line-height:1;
      margin-top:2px;
    }
    .alertTitleRow{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .alertTitle{
      margin:0;
      font-size:18px;
      font-weight:900;
      letter-spacing:-.01em;
    }

    .pill{
      font-size:12px;
      font-weight:900;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid;
      display:inline-flex;
      align-items:center;
      gap:6px;
      line-height:1;
      white-space:nowrap;
    }
    .pill.urgent{ color:var(--urgent); border-color:#fecaca; background:var(--urgent-bg); }
    .pill.warning{ color:var(--warning); border-color:#fed7aa; background:var(--warning-bg); }
    .pill.advisory{ color:var(--advisory); border-color:#bfdbfe; background:var(--advisory-bg); }

    .verified{
      display:inline-flex;
      align-items:center;
      gap:6px;
      color:var(--verified);
      font-weight:900;
      font-size:13px;
      white-space:nowrap;
    }
    .check{
      width:16px;height:16px;
      border-radius:999px;
      border:2px solid var(--verified);
      display:grid;
      place-items:center;
    }
    .check svg{ width:10px;height:10px; stroke:var(--verified); stroke-width:3; fill:none; }

    .alertDesc{
      margin:10px 0 0;
      color:#334155;
      font-weight:600;
      line-height:1.6;
      font-size:14.5px;
    }

    .cardActions{
      margin-top:12px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .actionBtn{
      border:1px solid #e5e7eb;
      background:#fff;
      color:#0f172a;
      border-radius:10px;
      padding:8px 12px;
      font-weight:900;
      font-family:inherit;
      cursor:pointer;
      box-shadow: 0 10px 18px rgba(2,6,23,.06);
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:13px;
    }
    .actionBtn:active{ transform:translateY(1px); }
    .actionBtn.primary{
      background:#111827;
      color:#fff;
      border-color:#111827;
    }

    .meta{
      margin-top:14px;
      display:flex;
      align-items:center;
      gap:14px;
      color:#64748b;
      flex-wrap:wrap;
      font-weight:700;
      font-size:13px;
    }
    .metaItem{
      display:flex;
      align-items:center;
      gap:7px;
    }
    .metaIcon{
      width:16px;height:16px;
      stroke:#94a3b8; fill:none; stroke-width:2;
      stroke-linecap:round; stroke-linejoin:round;
    }

    .sourcePill{
      padding:6px 10px;
      border-radius:999px;
      font-weight:900;
      font-size:12px;
      background:#0f172a;
      color:#fff;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .sourcePill.blue{ background:#dbeafe; color:#1d4ed8; }
    .sourcePill.purple{ background:#f3e8ff; color:#7c3aed; }
    .sourcePill.green{ background:#dcfce7; color:#166534; }

    /* toast */
    .toast{
      position:fixed;
      left:50%;
      bottom:20px;
      transform:translateX(-50%);
      background:#111827;
      color:#fff;
      padding:10px 14px;
      border-radius:999px;
      font-weight:800;
      box-shadow:0 16px 30px rgba(2,6,23,.20);
      opacity:0;
      pointer-events:none;
      transition:opacity .2s ease, transform .2s ease;
      z-index:9999;
      max-width:min(92vw, 520px);
      text-align:center;
    }
    .toast.show{
      opacity:1;
      transform:translateX(-50%) translateY(-6px);
    }

    /* responsive */
    @media (max-width: 860px){
      .statsRow{ grid-template-columns: 1fr; }
      .searchRow{ grid-template-columns: 1fr; }
      .resourcesBar{ flex-direction:column; align-items:flex-start; }
      .resourcesRight{ width:100%; justify-content:flex-start; flex-wrap:wrap; }
    }
  </style>
</head>

<body>
  <!-- ‚úÖ NAV BAR FROM index.html -->
  <header class="top-nav">
    <div class="nav-inner">
      <a class="nav-brand" href="javascript:void(0)" onclick="switchPage('index.html')">
        <div class="nav-logo" aria-hidden="true">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
            <path d="M12 2l7 4v7c0 5-3.5 9-7 9s-7-4-7-9V6l7-4z" stroke="currentColor" stroke-width="2"/>
            <path d="M9 12l2 2 4-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div class="nav-title">
          <strong>Guardian AI</strong>
          <span>Scam Protection</span>
        </div>
      </a>

      <nav class="nav-links" aria-label="Primary">
        <a href="javascript:void(0)" onclick="switchPage('index.html')" data-page="index.html">Home</a>
        <a href="javascript:void(0)" onclick="switchPage('scamanalyzer.html')" data-page="scamanalyzer.html">Deepfake Analyzer</a>
        <a href="javascript:void(0)" onclick="switchPage('courses.html')" data-page="courses.html">Courses</a>
        <a href="javascript:void(0)" onclick="switchPage('trustedContacts.html')" data-page="trustedContacts.html">Trusted Contacts</a>

        <a href="javascript:void(0)" onclick="switchPage('alerts.html')" data-page="alerts.html">Alerts</a>
                <a href="javascript:void(0)" onclick="switchPage('simulator.html')" data-page="simulator.html">Simulator</a>

        <a href="javascript:void(0)" onclick="switchPage('report.html')" data-page="report.html">Report</a>
      </nav>

      <div class="nav-actions">
        <button class="nav-btn" type="button" onclick="switchPage('courses.html')">Start Learning</button>
        <button class="nav-btn primary" type="button" onclick="switchPage('scamanalyzer.html')">Analyze a Deepfake</button>
      </div>

      <button class="nav-toggle" type="button" aria-label="Open menu" aria-expanded="false" id="navToggle">
        <span></span><span></span><span></span>
      </button>
    </div>

    <div class="nav-mobile" id="navMobile" hidden>
      <div class="nav-mobile-inner">
        <a href="javascript:void(0)" onclick="switchPage('index.html')" data-page="index.html">Home</a>
        <a href="javascript:void(0)" onclick="switchPage('scamanalyzer.html')" data-page="scamanalyzer.html">Deepfake Analyzer</a>
        <a href="javascript:void(0)" onclick="switchPage('courses.html')" data-page="courses.html">Courses</a>
        <a href="javascript:void(0)" onclick="switchPage('alerts.html')" data-page="alerts.html">Alerts</a>
        <a href="javascript:void(0)" onclick="switchPage('report.html')" data-page="report.html">Report</a>
        <div class="row">
          <button class="nav-btn" type="button" onclick="switchPage('courses.html')">Start Learning</button>
          <button class="nav-btn primary" type="button" onclick="switchPage('scamanalyzer.html')">Analyze a Deepfake</button>
        </div>
      </div>
    </div>
  </header>

  <main class="page">
    <div class="container">
      <div class="topIcon" aria-hidden="true">
        <svg width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="#f97316" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M18 8a6 6 0 10-12 0c0 7-3 7-3 7h18s-3 0-3-7"></path>
          <path d="M13.73 21a2 2 0 01-3.46 0"></path>
        </svg>
      </div>

      <h1 class="title">Community Scam Alerts</h1>
      <p class="subtitle">
        Real examples from U.S. government agencies (FTC + FBI/IC3) so users can learn patterns and verify sources.
        (This page is static: it doesn‚Äôt auto-fetch, but every ‚ÄúView source‚Äù link is an official .gov page.)
      </p>

      <!-- Stats -->
      <section class="statsRow" aria-label="Alert summary">
        <div class="statCard urgentStat">
          <p class="statNum" id="urgentCountTop">0</p>
          <p class="statLabel">Urgent Alerts</p>
        </div>
        <div class="statCard warnStat">
          <p class="statNum" id="warningCountTop">0</p>
          <p class="statLabel">Warnings</p>
        </div>
        <div class="statCard advStat">
          <p class="statNum" id="advisoryCountTop">0</p>
          <p class="statLabel">Advisories</p>
        </div>
      </section>

      <!-- Search + button -->
      <section class="searchRow" aria-label="Search alerts">
        <div class="searchBox">
          <svg class="searchIcon" viewBox="0 0 24 24">
            <circle cx="11" cy="11" r="7"></circle>
            <path d="M20 20l-3.3-3.3"></path>
          </svg>
          <input id="searchInput" type="text" placeholder="Search alerts..." autocomplete="off" />
        </div>

        <button class="btnOrange" id="latestBtn" type="button" title="This page is static (no live fetching)">
          <svg id="latestIcon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M21 12a9 9 0 1 1-2.64-6.36"></path>
            <path d="M21 3v7h-7"></path>
          </svg>
          <span id="latestLabel">Up to date</span>
        </button>
      </section>

      <!-- Official resources -->
      <section class="resourcesBar" aria-label="Official government resources">
        <div class="resourcesLeft">
          <h3>Official Government Resources</h3>
          <p>Report scams and get help from federal agencies</p>
        </div>
        <div class="resourcesRight">
          <button class="btnWhite" id="ftcBtn" type="button">
            FTC ReportFraud
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1d4ed8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M14 3h7v7"></path>
              <path d="M10 14L21 3"></path>
              <path d="M21 14v7h-7"></path>
              <path d="M3 10v11h11"></path>
            </svg>
          </button>

          <button class="btnWhite" id="ic3Btn" type="button">
            FBI IC3
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1d4ed8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M14 3h7v7"></path>
              <path d="M10 14L21 3"></path>
              <path d="M21 14v7h-7"></path>
              <path d="M3 10v11h11"></path>
            </svg>
          </button>

          <button class="btnWhite" id="resetBtn" type="button" title="Reset alerts back to the built-in list">
            Reset
          </button>
        </div>
      </section>

      <!-- Filter tabs -->
      <div class="tabsWrap" role="tablist" aria-label="Alert filters">
        <button class="tab active" data-filter="all" role="tab" aria-selected="true" id="tabAll">All (0)</button>
        <button class="tab" data-filter="urgent" role="tab" aria-selected="false" id="tabUrgent">Urgent (0)</button>
        <button class="tab" data-filter="warning" role="tab" aria-selected="false" id="tabWarning">Warning (0)</button>
        <button class="tab" data-filter="advisory" role="tab" aria-selected="false" id="tabAdvisory">Advisory (0)</button>
      </div>

      <!-- Alerts list (rendered by JS) -->
      <section class="list" id="alertsList" aria-label="Alerts list"></section>
    </div>
  </main>

  <div class="toast" id="toast">Saved</div>

  <script>
    // --- BASE-PATH SAFE NAVIGATION (fixes GitHub Pages subfolder issues) ---
    function getBaseDir() {
      const path = window.location.pathname;
      const parts = path.split("/");
      const last = parts[parts.length - 1];
      if (!last || last.includes(".html")) parts.pop();
      const base = parts.join("/") + (parts.length > 1 ? "/" : "/");
      return base;
    }
    function switchPage(page) {
      if (!page) return;
      if (/^https?:\/\//i.test(page)) { window.location.href = page; return; }
      window.location.href = getBaseDir() + page;
    }

    // Highlight active nav link (desktop + mobile dropdown)
    (function highlightActiveNav(){
      const file = (window.location.pathname.split("/").pop() || "alerts.html").toLowerCase();
      document.querySelectorAll('[data-page]').forEach(a => {
        a.classList.toggle('active', (a.getAttribute('data-page') || '').toLowerCase() === file);
      });
    })();

    // Nav toggle (tablet)
    (function navToggle(){
      const btn = document.getElementById("navToggle");
      const panel = document.getElementById("navMobile");
      if (!btn || !panel) return;
      btn.addEventListener("click", () => {
        const open = !panel.hasAttribute("hidden");
        if (open) {
          panel.setAttribute("hidden", "");
          btn.setAttribute("aria-expanded", "false");
        } else {
          panel.removeAttribute("hidden");
          btn.setAttribute("aria-expanded", "true");
        }
      });
    })();

    // ===== Toast helper =====
    const toast = document.getElementById('toast');
    let toastTimer = null;
    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add('show');
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=>toast.classList.remove('show'), 1500);
    }

    // ===== Alerts storage =====
    const LS_KEY = "guardian_alerts_v2_real_gov";

    const DEFAULT_ALERTS = [
      {
        id: "ftc_2026_01_09_olympics",
        type: "warning",
        emoji: "‚úàÔ∏è",
        title: "Traveling to the Olympics in Italy? Here‚Äôs how to avoid a scam",
        desc: "Fraudsters may sell fake tickets, fake lodging, or ‚Äútoo-good-to-be-true‚Äù travel deals around major events. Use trusted sellers, pay with protections (credit card), and confirm bookings directly with the official company.",
        sourceLabel: "FTC Consumer Alert",
        sourceTheme: "blue",
        region: "United States",
        reports: 0,
        date: "2026-01-09",
        verified: true,
        sourceUrl: "https://consumer.ftc.gov/consumer-alerts/2026/01/traveling-olympics-italy-heres-how-avoid-scam"
      },
      {
        id: "ftc_2026_01_07_credit_fix_scams",
        type: "warning",
        emoji: "üí≥",
        title: "Spot scams when fixing your credit",
        desc: "Watch for companies promising quick ‚Äúcredit repair,‚Äù asking you to pay before services, telling you to dispute accurate info, or urging you to create a new identity/credit profile. Those are red flags.",
        sourceLabel: "FTC Consumer Alert",
        sourceTheme: "blue",
        region: "United States",
        reports: 0,
        date: "2026-01-07",
        verified: true,
        sourceUrl: "https://consumer.ftc.gov/consumer-alerts/2026/01/spot-scams-when-fixing-your-credit"
      },
      {
        id: "ftc_2026_01_05_illegal_trick",
        type: "urgent",
        emoji: "üö®",
        title: "Influencers are pushing an illegal trick to ‚Äúfix‚Äù your credit report",
        desc: "Some posts promote filing false identity theft claims or creating fake documents to remove accurate info. That can be illegal and can backfire. If you need help, use legitimate dispute/consumer protection steps instead.",
        sourceLabel: "FTC Consumer Alert",
        sourceTheme: "blue",
        region: "United States",
        reports: 0,
        date: "2026-01-05",
        verified: true,
        sourceUrl: "https://consumer.ftc.gov/consumer-alerts/2026/01/influencers-are-pushing-illegal-trick-fix-your-credit-report"
      },
      {
        id: "ftc_2025_12_09_krebs",
        type: "urgent",
        emoji: "üïµÔ∏è",
        title: "Scammers are impersonating the FTC Chief Privacy Officer, John Krebs",
        desc: "Scammers may pretend to be government officials to demand money or personal info. Don‚Äôt trust caller ID or email display names; independently verify using official contact info and don‚Äôt send payments to ‚Äúfix‚Äù a problem.",
        sourceLabel: "FTC Consumer Alert",
        sourceTheme: "blue",
        region: "United States",
        reports: 0,
        date: "2025-12-09",
        verified: true,
        sourceUrl: "https://consumer.ftc.gov/consumer-alerts/2025/12/scammers-are-impersonating-ftc-chief-privacy-officer-john-krebs"
      },
      {
        id: "ftc_2025_12_08_casting",
        type: "warning",
        emoji: "üé¨",
        title: "Lights, camera‚Ä¶ scam! Spot virtual casting call scams",
        desc: "Scammers may offer fake auditions and then ask for fees, personal info, or payment for ‚Äúequipment‚Äù or ‚Äúbackground checks.‚Äù Real opportunities don‚Äôt pressure you to pay upfront or send sensitive info to strangers.",
        sourceLabel: "FTC Consumer Alert",
        sourceTheme: "blue",
        region: "United States",
        reports: 0,
        date: "2025-12-08",
        verified: true,
        sourceUrl: "https://consumer.ftc.gov/consumer-alerts/2025/12/lights-camera-scam-spot-virtual-casting-call-scams"
      },
      {
        id: "ic3_2025_12_05_virtual_kidnapping",
        type: "urgent",
        emoji: "üì∏",
        title: "Criminals using altered proof-of-life media in virtual kidnapping for ransom scams",
        desc: "FBI warns scammers may alter photos from social media to create fake ‚Äúproof‚Äù and demand ransom. Pause, verify by contacting your loved one directly, and use a family code word.",
        sourceLabel: "FBI/IC3 PSA",
        sourceTheme: "purple",
        region: "United States",
        reports: 0,
        date: "2025-12-05",
        verified: true,
        sourceUrl: "https://www.ic3.gov/PSA/2025/PSA251205"
      },
      {
        id: "ic3_2025_12_19_senior_officials",
        type: "urgent",
        emoji: "üì≤",
        title: "Senior U.S. officials continue to be impersonated in malicious messaging campaign",
        desc: "FBI warns of impersonation via texts and AI-generated voice messages, often pushing targets onto encrypted apps and then requesting sensitive actions (codes, documents, wiring funds). Verify independently and treat urgency as a red flag.",
        sourceLabel: "FBI/IC3 PSA",
        sourceTheme: "purple",
        region: "United States",
        reports: 0,
        date: "2025-12-19",
        verified: true,
        sourceUrl: "https://www.ic3.gov/PSA/2025/PSA251219"
      },
      {
        id: "ic3_2025_04_18_impersonating_ic3",
        type: "warning",
        emoji: "üé≠",
        title: "FBI warns of scammers impersonating the IC3",
        desc: "Scammers may claim they recovered your lost funds and request payment or financial details. IC3 does not directly contact victims to demand money or ‚Äúrecover‚Äù funds. Don‚Äôt pay; report through official channels.",
        sourceLabel: "FBI/IC3 PSA",
        sourceTheme: "purple",
        region: "United States",
        reports: 0,
        date: "2025-04-18",
        verified: true,
        sourceUrl: "https://www.ic3.gov/PSA/2025/PSA250418"
      },
      {
        id: "fbi_2026_01_08_quishing",
        type: "advisory",
        emoji: "üî≥",
        title: "Malicious QR codes (‚Äúquishing‚Äù) used in spearphishing campaigns",
        desc: "FBI issued a FLASH describing QR codes that hide malicious links and push victims to mobile credential-harvesting pages. Don‚Äôt scan unsolicited QR codes; verify the source and never enter passwords from QR-linked pages.",
        sourceLabel: "FBI FLASH (PDF)",
        sourceTheme: "green",
        region: "United States",
        reports: 0,
        date: "2026-01-08",
        verified: true,
        sourceUrl: "https://www.ic3.gov/CSA/2026/260108.pdf"
      }
    ];

    function loadAlerts(){
      try{
        const raw = localStorage.getItem(LS_KEY);
        if(!raw) return null;
        const parsed = JSON.parse(raw);
        if(!Array.isArray(parsed)) return null;
        return parsed;
      }catch(e){ return null; }
    }
    function saveAlerts(alerts){
      localStorage.setItem(LS_KEY, JSON.stringify(alerts));
    }

    // ===== Render + filtering =====
    const alertsList = document.getElementById('alertsList');
    const tabs = Array.from(document.querySelectorAll('.tab'));
    const searchInput = document.getElementById('searchInput');

    const countsTop = {
      urgent: document.getElementById('urgentCountTop'),
      warning: document.getElementById('warningCountTop'),
      advisory: document.getElementById('advisoryCountTop'),
    };

    const tabEls = {
      all: document.getElementById('tabAll'),
      urgent: document.getElementById('tabUrgent'),
      warning: document.getElementById('tabWarning'),
      advisory: document.getElementById('tabAdvisory'),
    };

    let currentFilter = 'all';

    function escapeHTML(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    function formatDate(iso){
      if(!iso || !/^\d{4}-\d{2}-\d{2}$/.test(iso)) return iso || "";
      const [y,m,d] = iso.split("-");
      return `${m}/${d}/${y}`;
    }

    function sourcePillHTML(a){
      const theme = a.sourceTheme || "";
      const cls = theme ? `sourcePill ${theme}` : "sourcePill";
      return `<span class="${cls}">${escapeHTML(a.sourceLabel || "Source")}</span>`;
    }

    function pillHTML(type){
      const t = type || "advisory";
      const label = t.charAt(0).toUpperCase() + t.slice(1);
      return `<span class="pill ${t}">${label}</span>`;
    }

    function verifiedHTML(isVerified){
      if(!isVerified) return "";
      return `
        <span class="verified">
          <span class="check">
            <svg viewBox="0 0 24 24"><path d="M6 12l4 4 8-8"/></svg>
          </span>
          Verified
        </span>
      `;
    }

    function cardClass(type){
      if(type === "warning") return "alertCard warning";
      if(type === "advisory") return "alertCard advisory";
      return "alertCard urgent";
    }

    function cardHTML(a){
      const type = a.type || "advisory";
      const viewSourceBtn = a.sourceUrl
        ? `<button class="actionBtn" type="button" data-action="openSource" data-url="${escapeHTML(a.sourceUrl)}">View source</button>`
        : `<button class="actionBtn" type="button" data-action="noSource">No source link</button>`;

      return `
        <article class="${cardClass(type)}" data-type="${escapeHTML(type)}" data-id="${escapeHTML(a.id)}">
          <div class="alertTop">
            <div class="emoji">${escapeHTML(a.emoji || "üîî")}</div>
            <div>
              <div class="alertTitleRow">
                <h3 class="alertTitle">${escapeHTML(a.title || "")}</h3>
                ${pillHTML(type)}
                ${verifiedHTML(!!a.verified)}
              </div>

              <p class="alertDesc">${escapeHTML(a.desc || "")}</p>

              <div class="cardActions">
                <button class="actionBtn primary" type="button" data-action="copySummary">Copy summary</button>
                ${viewSourceBtn}
              </div>

              <div class="meta">
                ${sourcePillHTML(a)}
                <span class="metaItem">
                  <svg class="metaIcon" viewBox="0 0 24 24"><path d="M12 21s7-4.5 7-11a7 7 0 1 0-14 0c0 6.5 7 11 7 11z"></path><circle cx="12" cy="10" r="2.2"></circle></svg>
                  ${escapeHTML(a.region || "United States")}
                </span>
                <span class="metaItem">
                  <svg class="metaIcon" viewBox="0 0 24 24"><path d="M4 14l6-6 4 4 6-6"></path><path d="M20 20H4"></path></svg>
                  ${escapeHTML(String(a.reports ?? 0))} reports (demo)
                </span>
                <span class="metaItem">
                  <svg class="metaIcon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="9"></circle><path d="M12 7v6l3 2"></path></svg>
                  ${escapeHTML(formatDate(a.date))}
                </span>
              </div>
            </div>
          </div>
        </article>
      `;
    }

    function computeCounts(list){
      const c = { urgent:0, warning:0, advisory:0, all: list.length };
      list.forEach(a => { if(c[a.type] !== undefined) c[a.type]++; });
      return c;
    }

    function updateCountLabels(counts){
      countsTop.urgent.textContent = counts.urgent;
      countsTop.warning.textContent = counts.warning;
      countsTop.advisory.textContent = counts.advisory;

      tabEls.all.textContent = `All (${counts.all})`;
      tabEls.urgent.textContent = `Urgent (${counts.urgent})`;
      tabEls.warning.textContent = `Warning (${counts.warning})`;
      tabEls.advisory.textContent = `Advisory (${counts.advisory})`;
    }

    function render(alerts){
      alertsList.innerHTML = alerts.map(cardHTML).join("");
    }

    function applyFilters(){
      const q = searchInput.value.trim().toLowerCase();
      const allCards = Array.from(document.querySelectorAll('.alertCard'));

      allCards.forEach(card => {
        const type = card.getAttribute('data-type');
        const text = card.innerText.toLowerCase();
        const matchesFilter = (currentFilter === 'all') || (type === currentFilter);
        const matchesSearch = !q || text.includes(q);
        card.style.display = (matchesFilter && matchesSearch) ? "" : "none";
      });

      const searchMatchedIds = new Set();
      allCards.forEach(card => {
        const text = card.innerText.toLowerCase();
        if(!q || text.includes(q)) searchMatchedIds.add(card.getAttribute("data-id"));
      });

      const searchMatchedAlerts = state.alerts.filter(a => searchMatchedIds.has(a.id));
      updateCountLabels(computeCounts(searchMatchedAlerts));
    }

    // ===== State init =====
    const saved = loadAlerts();
    const state = { alerts: saved && saved.length ? saved : DEFAULT_ALERTS.slice() };
    if(!saved) saveAlerts(state.alerts);

    render(state.alerts);
    updateCountLabels(computeCounts(state.alerts));
    applyFilters();

    tabs.forEach(btn => {
      btn.addEventListener('click', () => {
        tabs.forEach(t => t.classList.remove('active'));
        btn.classList.add('active');
        currentFilter = btn.dataset.filter;
        applyFilters();
      });
    });

    searchInput.addEventListener('input', applyFilters);

    alertsList.addEventListener("click", async (e) => {
      const btn = e.target.closest("button[data-action]");
      if(!btn) return;

      const card = e.target.closest(".alertCard");
      if(!card) return;

      const id = card.getAttribute("data-id");
      const alertObj = state.alerts.find(a => a.id === id);
      if(!alertObj) return;

      const action = btn.getAttribute("data-action");

      if(action === "copySummary"){
        const summary =
`Guardian AI Alert
Type: ${alertObj.type?.toUpperCase()}
Title: ${alertObj.title}
Date: ${alertObj.date}
Source: ${alertObj.sourceLabel}${alertObj.sourceUrl ? " ("+alertObj.sourceUrl+")" : ""}

Summary:
${alertObj.desc}

Suggested next step:
Pause + verify independently using official contact info. If you lost money or shared info, report to FTC (ReportFraud) and/or FBI IC3.`;

        try{
          await navigator.clipboard.writeText(summary);
          showToast("Copied to clipboard");
        }catch(err){
          const ta = document.createElement("textarea");
          ta.value = summary;
          document.body.appendChild(ta);
          ta.select();
          document.execCommand("copy");
          ta.remove();
          showToast("Copied");
        }
      }

      if(action === "openSource"){
        const url = btn.getAttribute("data-url");
        if(url) window.open(url, "_blank");
      }

      if(action === "noSource"){
        showToast("No source link for this alert");
      }
    });

    document.getElementById("latestBtn").addEventListener("click", () => {
      showToast("This page is static (no live fetching)");
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    document.getElementById('ftcBtn').addEventListener('click', () => {
      window.open('https://reportfraud.ftc.gov/', '_blank');
    });
    document.getElementById('ic3Btn').addEventListener('click', () => {
      window.open('https://www.ic3.gov/', '_blank');
    });

    document.getElementById("resetBtn").addEventListener("click", () => {
      localStorage.removeItem(LS_KEY);
      state.alerts = DEFAULT_ALERTS.slice();
      saveAlerts(state.alerts);
      render(state.alerts);
      searchInput.value = "";
      currentFilter = "all";
      tabs.forEach(t => t.classList.remove("active"));
      document.getElementById("tabAll").classList.add("active");
      updateCountLabels(computeCounts(state.alerts));
      applyFilters();
      showToast("Reset to built-in gov alerts");
    });
  </script>
</body>
</html>
