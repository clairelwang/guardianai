<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Report a Scam</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    /* ---------- MOBILE-ONLY MINI BAR (same behavior as home) ---------- */
    .mini-bar{
      position: fixed;
      top: 14px;
      left: 14px;
      z-index: 9999;
      display: none;
      align-items: center;
      gap: 10px;
      background: white;
      padding: 10px 12px;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    }
    .mini-bar select{
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid #e5e7eb;
      font-size: 14px;
      cursor: pointer;
      outline: none;
      min-width: 160px;
      background: #fff;
    }
    .mini-bar button{
      width: 42px;
      height: 42px;
      border: none;
      background: #f3f4f6;
      border-radius: 12px;
      cursor: pointer;
      font-size: 16px;
      display: grid;
      place-items: center;
    }
    .mini-bar button:hover{ background:#e5e7eb; }
    @media (max-width: 560px){
      .mini-bar{ display:flex; }
    }

    /* ===================== TOP NAV (EXACT HOME STYLE) ===================== */
    .top-nav{
      position: sticky;
      top: 0;
      z-index: 9998;
      background: rgba(255,255,255,.88);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(226,232,240,.9);
    }
    .top-nav .nav-inner{
      max-width: 1200px;
      margin: 0 auto;
      padding: 14px 18px;
      display: flex;
      align-items: center;
      gap: 16px;
    }
    .nav-brand{
      display:flex;
      align-items:center;
      gap:12px;
      font-weight:900;
      letter-spacing:-.01em;
      color:#0b1220;
      min-width: 180px;
      text-decoration:none;
    }
    .nav-logo{
      width:42px;height:42px;
      border-radius:14px;
      background: rgba(110,231,184,.14);
      border:1px solid rgba(110,231,184,.34);
      display:grid;place-items:center;
      color:#065f46;
    }
    .nav-title{
      display:flex;
      flex-direction:column;
      line-height:1.05;
    }
    .nav-title strong{ font-size:15px; }
    .nav-title span{
      font-size:12px;
      color:#64748b;
      font-weight:700;
      margin-top:2px;
    }

    .nav-links{
      display:flex;
      align-items:center;
      gap: 6px;
      flex: 1;
      justify-content: center;
      position: relative; /* for slider */
    }
    .nav-links a{
      font-weight:800;
      font-size:13px;
      color:#0b1220;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid transparent;
      transition: .15s ease;
      white-space: nowrap;
      text-decoration:none;
      position: relative;
      z-index: 1; /* above slider */
    }
    .nav-links a:hover{
      background: rgba(15,23,42,.06);
      border-color: rgba(15,23,42,.06);
    }
    .nav-links a.active{
      background: transparent;      /* slider handles highlight */
      border-color: transparent;
      color:#065f46;
    }

    /* green animated slider (same as home) */
    .nav-slider{
      position:absolute;
      left:0; top:50%;
      transform: translate(0, -50%);
      height: 36px;
      width: 0;
      border-radius: 12px;
      background: rgba(52,211,153,.18);
      border: 0;                 /* prevent green ‚Äúsliver‚Äù */
      box-shadow: 0 10px 18px rgba(2,6,23,.06);
      transition: transform .22s ease, width .22s ease, opacity .12s ease;
      z-index: 0;
      pointer-events:none;
      opacity: 0;                /* hidden until positioned */
    }
    .nav-slider.ready{
      opacity: 1;
      border: 1px solid rgba(52,211,153,.40);
    }

    .nav-actions{
      display:flex;
      align-items:center;
      gap:10px;
      justify-content:flex-end;
      min-width: 230px;
    }
    .nav-btn{
      height:42px;
      padding: 0 14px;
      border-radius: 12px;
      font-weight:900;
      font-size:13px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border: 1px solid rgba(15,23,42,.10);
      background: #fff;
      color:#0b1220;
      cursor:pointer;
      transition: .15s ease;
      white-space: nowrap;
    }
    .nav-btn:hover{ background: rgba(15,23,42,.04); }
    .nav-btn.primary{
      background: #0b1220;
      border-color: #0b1220;
      color:#fff;
    }
    .nav-btn.primary:hover{ filter: brightness(1.05); }

    .nav-toggle{
      display:none;
      width:44px;height:44px;
      border-radius: 14px;
      border: 1px solid rgba(15,23,42,.10);
      background: #fff;
      cursor:pointer;
    }
    .nav-toggle span{
      display:block;
      width:18px;height:2px;
      background:#0b1220;
      margin: 4px auto;
      border-radius:99px;
    }

    .nav-mobile{
      display:none;
      border-top:1px solid rgba(226,232,240,.9);
      background: rgba(255,255,255,.92);
    }
    .nav-mobile .nav-mobile-inner{
      max-width: 1200px;
      margin: 0 auto;
      padding: 10px 18px 14px;
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .nav-mobile a{
      font-weight:900;
      font-size:14px;
      padding:12px 12px;
      border-radius: 14px;
      background: rgba(15,23,42,.04);
      border: 1px solid rgba(15,23,42,.06);
      text-decoration:none;
      color:#0b1220;
    }
    .nav-mobile a.active{
      background: rgba(52,211,153,.18);
      border-color: rgba(52,211,153,.40);
      color:#065f46;
    }
    .nav-mobile .row{
      display:flex;
      gap:10px;
      margin-top:6px;
    }
    .nav-mobile .row .nav-btn{
      flex:1;
      height:46px;
      border-radius: 14px;
    }

    @media (max-width: 980px){
      .nav-links{ display:none; }
      .nav-actions{ display:none; }
      .nav-toggle{ display:block; margin-left:auto; }
      .nav-brand{ min-width: unset; }
      .top-nav .nav-inner{ padding: 12px 16px; }
      .nav-mobile{ display:block; }
      .nav-mobile[hidden]{ display:none; }
    }
    @media (max-width: 560px){
      .top-nav{ display:none; } /* mini-bar handles tiny screens */
    }
    /* ===================== END TOP NAV ===================== */

    :root{
      --bg:#f6f7fb; --card:#ffffff; --text:#0f172a; --muted:#64748b;
      --border:#e5e7eb; --shadow: 0 10px 30px rgba(15,23,42,.08);
      --teal:#0ea5b7; --btn:#7ec7d7; --btnText:#ffffff;
      --radius:16px;
      --danger:#ef4444; --ok:#16a34a;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    /* layout */
    .page{
      width:min(980px, calc(100% - 40px));
      margin:0 auto;
      padding: 92px 0 90px;
    }
    .topIcon{
      width:68px; height:68px; margin: 0 auto 12px; border-radius: 18px;
      background: #dff6fb; display:grid; place-items:center;
      box-shadow: 0 10px 24px rgba(14,165,183,.12);
    }
    .topIcon svg{ width: 30px; height: 30px; color: var(--teal); }

    h1{
      text-align:center;
      font-size: 44px;
      line-height: 1.05;
      margin: 10px 0 10px;
      letter-spacing: -0.02em;
    }
    .subtitle{
      text-align:center;
      color: var(--muted);
      font-size: 18px;
      line-height: 1.5;
      margin: 0 auto 26px;
      max-width: 720px;
    }

    .stepper{ display:flex; align-items:center; justify-content:center; gap:14px; margin: 10px auto 34px; }
    .stepDot{
      width: 36px; height: 36px; border-radius: 999px; display:grid; place-items:center;
      font-weight: 800; font-size: 14px; border: 2px solid #e5e7eb; color:#6b7280; background:#f3f4f6;
    }
    .stepDot.active{ border-color: var(--teal); background: var(--teal); color:#fff; }
    .stepLine{ width: 70px; height: 4px; border-radius: 999px; background:#e5e7eb; }

    .card{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 26px;
      width: min(740px, 100%);
      margin: 0 auto;
    }
    .cardTitle{ font-size: 18px; font-weight: 800; margin: 0 0 16px; }
    .hint{ margin: 0 0 18px; color: var(--muted); font-weight:600; font-size: 13.5px; line-height:1.5; }

    .typeGrid{ display:grid; grid-template-columns: repeat(3, 1fr); gap: 14px; margin-bottom: 18px; }
    .typeBtn{
      border: 2px solid #e5e7eb; background:#fff; border-radius: 12px;
      padding: 16px 14px; min-height: 72px; cursor:pointer;
      display:flex; align-items:center; gap: 10px; text-align:left;
      transition: border-color .2s ease, box-shadow .2s ease, transform .05s ease;
    }
    .typeBtn:hover{ box-shadow: 0 10px 18px rgba(15,23,42,.08); transform: translateY(-1px); }
    .typeBtn.selected{ border-color: #9ca3af; box-shadow: 0 10px 18px rgba(15,23,42,.08); }

    .typeIcon{
      width: 34px; height: 34px; border-radius: 10px; display:grid; place-items:center;
      color:#9ca3af; background:#f8fafc; border: 1px solid #e5e7eb; flex: 0 0 auto;
    }
    .typeIcon svg{ width:18px; height:18px; }
    .typeLabel{ font-weight: 800; font-size: 13px; color:#0f172a; line-height: 1.1; }

    .row{ display:grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    .row3{ display:grid; grid-template-columns: 1fr 1fr 1fr; gap: 14px; }
    .field{ display:flex; flex-direction:column; gap: 7px; margin-bottom: 14px; }
    label{ font-weight:800; font-size: 12.5px; color:#0f172a; }
    input, select, textarea{
      width:100%;
      border:1px solid var(--border);
      border-radius: 12px;
      padding: 12px 12px;
      font-family:inherit;
      font-size: 14px;
      outline:none;
      background:#fff;
    }
    textarea{ min-height: 120px; resize: vertical; line-height:1.5; }
    input:focus, select:focus, textarea:focus{ border-color:#9ca3af; box-shadow: 0 0 0 3px rgba(14,165,183,.10); }

    .actions{ display:flex; gap: 12px; margin-top: 12px; flex-wrap:wrap; }
    .btn{
      border:none; border-radius: 12px; padding: 13px 16px; cursor:pointer;
      font-family:inherit; font-weight: 900; font-size: 14px;
      display:inline-flex; align-items:center; justify-content:center; gap: 10px;
      transition: transform .05s ease, filter .15s ease;
    }
    .btn:active{ transform: scale(.99); }
    .btnPrimary{ background: var(--btn); color: var(--btnText); }
    .btnGhost{ background:#fff; color:#111827; border:1px solid var(--border); }
    .btnDanger{ background: var(--danger); color:#fff; }
    .btnOk{ background: var(--ok); color:#fff; }
    .btn:disabled{ opacity:.55; cursor:not-allowed; }

    .divider{ height:1px; background: var(--border); margin: 16px 0; }

    .toast{
      margin-top: 14px; padding: 12px 12px; border-radius: 12px; display:none;
      font-weight: 800; font-size: 13px;
    }
    .toast.ok{ background: #dcfce7; color:#166534; border:1px solid #bbf7d0; }
    .toast.err{ background: #fee2e2; color:#7f1d1d; border:1px solid #fecaca; }

    .reviewBox{
      border:1px solid var(--border);
      border-radius: 14px;
      background:#fff;
      padding: 14px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12.5px;
      line-height: 1.55;
      color:#0f172a;
      white-space: pre-wrap;
    }
    .smallLink{ color:#1d4ed8; font-weight: 900; text-decoration:none; }
    .smallLink:hover{ text-decoration:underline; }

    .hidden{ display:none !important; }

    body.mobileView .page{ width: min(820px, calc(100% - 30px)); padding-top: 84px; }

    @media (max-width: 860px){
      h1{ font-size: 36px; }
      .typeGrid{ grid-template-columns: 1fr; }
      .stepLine{ width: 54px; }
      .row, .row3{ grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <!-- Mini Page Switcher (MOBILE ONLY via CSS) -->
  <div class="mini-bar">
    <select id="pageSelect" onchange="switchPage(this.value)">
      <option value="index.html">Home</option>
      <option value="scamanalyzer.html">Deepfake Analyzer</option>
      <option value="courses.html">Courses</option>
      <option value="trustedContacts.html">Trusted Contacts</option>
      <option value="alerts.html">Alerts</option>
      <option value="report.html" selected>Report</option>
    </select>
    <button onclick="toggleMobileView()" title="Mobile view">üì±</button>
    <button onclick="location.reload()" title="Refresh">‚ü≥</button>
  </div>

  <!-- ‚úÖ HOME NAVBAR (with slider) -->
  <header class="top-nav">
    <div class="nav-inner">
      <a class="nav-brand" href="javascript:void(0)" onclick="switchPage('index.html')">
        <div class="nav-logo" aria-hidden="true">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
            <path d="M12 2l7 4v7c0 5-3.5 9-7 9s-7-4-7-9V6l7-4z" stroke="currentColor" stroke-width="2"/>
            <path d="M9 12l2 2 4-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div class="nav-title">
          <strong>Guardian AI</strong>
          <span>Scam Protection</span> 
        </div>
      </a>

      <nav class="nav-links" aria-label="Primary" id="navLinks">
        <div class="nav-slider" id="navSlider" aria-hidden="true"></div>

        <a href="javascript:void(0)" onclick="switchPage('index.html')" data-page="index.html">Home</a>
        <a href="javascript:void(0)" onclick="switchPage('scamanalyzer.html')" data-page="scamanalyzer.html">Deepfake Analyzer</a>
        <a href="javascript:void(0)" onclick="switchPage('courses.html')" data-page="courses.html">Courses</a>
        <a href="javascript:void(0)" onclick="switchPage('trustedContacts.html')" data-page="trustedContacts.html">Trusted Contacts</a>
        <a href="javascript:void(0)" onclick="switchPage('alerts.html')" data-page="alerts.html">Alerts</a>
                <a href="javascript:void(0)" onclick="switchPage('simulator.html')" data-page="simulator.html">Simulator</a>

        <a href="javascript:void(0)" onclick="switchPage('report.html')" data-page="report.html">Report</a>
      </nav>

      <div class="nav-actions">
        <button class="nav-btn" type="button" onclick="switchPage('courses.html')">Start Learning</button>
        <button class="nav-btn primary" type="button" onclick="switchPage('scamanalyzer.html')">Analyze a Deepfake</button>
      </div>

      <button class="nav-toggle" type="button" aria-label="Open menu" aria-expanded="false" id="navToggle">
        <span></span><span></span><span></span>
      </button>
    </div>

    <div class="nav-mobile" id="navMobile" hidden>
      <div class="nav-mobile-inner">
        <a href="javascript:void(0)" onclick="switchPage('index.html')" data-page="index.html">Home</a>
        <a href="javascript:void(0)" onclick="switchPage('scamanalyzer.html')" data-page="scamanalyzer.html"></a>Deepfake Analyzer
        <a href="javascript:void(0)" onclick="switchPage('courses.html')" data-page="courses.html">Courses</a>
        <a href="javascript:void(0)" onclick="switchPage('trustedContacts.html')" data-page="trustedContacts.html">Trusted Contacts</a>
        <a href="javascript:void(0)" onclick="switchPage('alerts.html')" data-page="alerts.html">Alerts</a>
        <a href="javascript:void(0)" onclick="switchPage('report.html')" data-page="report.html" class="active">Report</a>

        <div class="row">
          <button class="nav-btn" type="button" onclick="switchPage('courses.html')">Start Learning</button>
          <button class="nav-btn primary" type="button" onclick="switchPage('scamanalyzer.html')">Analyze a Deepfake</button>
        </div>
      </div>
    </div>
  </header>

  <main class="page">
    <div class="topIcon" aria-hidden="true">
      <svg viewBox="0 0 24 24" fill="none">
        <path d="M8 3h6l4 4v14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2Z"
              stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
        <path d="M14 3v5h5" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
        <path d="M9 13h6M9 17h6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </div>

    <h1>Report a Scam</h1>
    <p class="subtitle">
      Fill this out once and quickly report to official government agencies.
    </p>

    <div class="stepper" aria-label="Progress steps">
      <div class="stepDot active" id="dot1" aria-current="step">1</div>
      <div class="stepLine" aria-hidden="true"></div>
      <div class="stepDot" id="dot2">2</div>
      <div class="stepLine" aria-hidden="true"></div>
      <div class="stepDot" id="dot3">3</div>
    </div>

    <!-- STEP 1 -->
    <section class="card" id="step1" aria-label="Report step 1">
      <div class="cardTitle">Step 1 ‚Äî What type of scam did you experience?</div>
      <p class="hint">Pick one to continue. You can change it later.</p>

      <div class="typeGrid">
        <button class="typeBtn" type="button" data-type="phone">
          <div class="typeIcon" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M6.5 3.5 9 5.2c.6.4.8 1.2.4 1.8L8 9c.8 1.6 2.4 3.2 4 4l2-1.4c.6-.4 1.4-.2 1.8.4l1.7 2.5c.4.6.3 1.4-.2 1.9-1 .9-2.4 1.6-3.7 1.6-3.2 0-6.6-2.8-8.9-5.1S3 7.2 3 4c0-1.3.7-2.7 1.6-3.7.5-.5 1.3-.6 1.9-.2Z"
                    stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="typeLabel">Phone Call Scam</div>
        </button>

        <button class="typeBtn" type="button" data-type="email">
          <div class="typeIcon" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M4 6h16v12H4V6Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
              <path d="m4 7 8 6 8-6" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="typeLabel">Email/Phishing</div>
        </button>

        <button class="typeBtn" type="button" data-type="text">
          <div class="typeIcon" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M5 6h14a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H10l-4 3v-3H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2Z"
                    stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="typeLabel">Text Message Scam</div>
        </button>

        <button class="typeBtn" type="button" data-type="website">
          <div class="typeIcon" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M4 5h16v14H4V5Z" stroke="currentColor" stroke-width="2"/>
              <path d="M4 9h16" stroke="currentColor" stroke-width="2"/>
              <path d="M10 19c-1.8-2.2-2.6-4.8-2.6-7S8.2 7.2 10 5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M14 19c1.8-2.2 2.6-4.8 2.6-7S15.8 7.2 14 5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="typeLabel">Fake Website</div>
        </button>

        <button class="typeBtn" type="button" data-type="social">
          <div class="typeIcon" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M9 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z" stroke="currentColor" stroke-width="2"/>
              <path d="M22 21v-2a4 4 0 0 0-3-3.87" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M16 3.13a4 4 0 0 1 0 7.75" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="typeLabel">Social Media Scam</div>
        </button>

        <button class="typeBtn" type="button" data-type="other">
          <div class="typeIcon" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none">
              <path d="M12 9v4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M12 17h.01" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
              <path d="M10.3 4.3 2.9 18.1A2 2 0 0 0 4.6 21h14.8a2 2 0 0 0 1.7-2.9L13.7 4.3a2 2 0 0 0-3.4 0Z"
                    stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="typeLabel">Other</div>
        </button>
      </div>

      <div class="actions">
        <button class="btn btnPrimary" id="toStep2" type="button" disabled>Continue</button>
        <button class="btn btnGhost" id="clearDraft1" type="button">Clear Draft</button>
      </div>
      <div class="toast" id="toast1"></div>
    </section>

    <!-- STEP 2 -->
    <section class="card hidden" id="step2" aria-label="Report step 2">
      <div class="cardTitle">Step 2 ‚Äî Scam details</div>
      <p class="hint">Don‚Äôt include passwords or full SSNs. Add only what‚Äôs needed to identify the scam.</p>

      <div class="row">
        <div class="field">
          <label for="scamType">Scam type</label>
          <input id="scamType" type="text" readonly />
        </div>
        <div class="field">
          <label for="dateHappened">Date happened</label>
          <input id="dateHappened" type="date" />
        </div>
      </div>

      <div class="row">
        <div class="field">
          <label for="contact">Scammer contact (phone/email/username)</label>
          <input id="contact" type="text" placeholder="Example: +1 (555) 123-4567 or name@email.com" />
        </div>
        <div class="field">
          <label for="link">Link/website used (if any)</label>
          <input id="link" type="url" placeholder="https://..." />
        </div>
      </div>

      <div class="row3">
        <div class="field">
          <label for="moneyLost">Money lost (USD)</label>
          <input id="moneyLost" type="number" min="0" step="0.01" placeholder="0" />
        </div>
        <div class="field">
          <label for="paymentMethod">Payment method</label>
          <select id="paymentMethod">
            <option value="">Select...</option>
            <option>Gift cards</option>
            <option>Bank transfer / wire</option>
            <option>Crypto</option>
            <option>Credit / debit card</option>
            <option>Cash app / P2P (Zelle, Venmo, Cash App)</option>
            <option>Cash</option>
            <option>Other</option>
          </select>
        </div>
        <div class="field">
          <label for="state">State (optional)</label>
          <input id="state" type="text" placeholder="TX" />
        </div>
      </div>

      <div class="field">
        <label for="summary">What happened? (short but specific)</label>
        <textarea id="summary" placeholder="Describe what they claimed, what they asked for, and what you did."></textarea>
      </div>

      <div class="actions">
        <button class="btn btnGhost" id="backTo1" type="button">Back</button>
        <button class="btn btnPrimary" id="toStep3" type="button">Continue</button>
        <button class="btn btnGhost" id="saveDraft2" type="button">Save Draft</button>
      </div>
      <div class="toast" id="toast2"></div>
    </section>

    <!-- STEP 3 -->
    <section class="card hidden" id="step3" aria-label="Report step 3">
      <div class="cardTitle">Step 3 ‚Äî Review & report</div>
      <p class="hint">
        Copy your report summary, then use the official buttons to report to FTC/IC3.
      </p>

      <div class="reviewBox" id="reviewBox"></div>

      <div class="divider"></div>

      <div class="actions">
        <button class="btn btnGhost" id="backTo2" type="button">Back</button>
        <button class="btn btnOk" id="copyBtn" type="button">Copy Report</button>
        <button class="btn btnDanger" id="clearAll" type="button">Clear</button>
      </div>

      <div class="divider"></div>

      <div class="actions">
        <button class="btn btnGhost" id="openFTC" type="button">Open FTC Report</button>
        <button class="btn btnGhost" id="openIC3" type="button">Open FBI IC3</button>
      </div>

      <p class="hint" style="margin-top:12px;">
        FTC: <a class="smallLink" href="https://reportfraud.ftc.gov/" target="_blank" rel="noopener">reportfraud.ftc.gov</a> |
        IC3: <a class="smallLink" href="https://www.ic3.gov/" target="_blank" rel="noopener">ic3.gov</a>
      </p>

      <div class="toast" id="toast3"></div>
    </section>
  </main>

  <script>
    /* ---------- BASE-PATH SAFE NAVIGATION (same as home) ---------- */
    function getBaseDir() {
      const path = window.location.pathname;
      const parts = path.split("/");
      const last = parts[parts.length - 1];
      if (!last || last.includes(".html")) parts.pop();
      return parts.join("/") + (parts.length > 1 ? "/" : "/");
    }
    function switchPage(page) {
      if (!page) return;
      if (/^https?:\/\//i.test(page)) { window.location.href = page; return; }
      window.location.href = getBaseDir() + page;
    }
    function toggleMobileView() {
      const meta = document.querySelector('meta[name="viewport"]');
      if (!meta) return;
      if (meta.content.includes("width=375")) meta.content = "width=device-width, initial-scale=1";
      else meta.content = "width=375, initial-scale=1";
    }

    // Keep dropdown synced to current page (mini-bar)
    (function syncDropdownToPage(){
      const sel = document.getElementById("pageSelect");
      if (!sel) return;
      const file = window.location.pathname.split("/").pop();
      sel.value = (file && file.includes(".html")) ? file : "index.html";
    })();

    /* ---------- NAV: mobile toggle + active highlight + green slider ---------- */
    (function navInit(){
      const btn = document.getElementById("navToggle");
      const panel = document.getElementById("navMobile");

      if (btn && panel){
        btn.addEventListener("click", () => {
          const open = !panel.hasAttribute("hidden");
          if (open){
            panel.setAttribute("hidden", "");
            btn.setAttribute("aria-expanded", "false");
          } else {
            panel.removeAttribute("hidden");
            btn.setAttribute("aria-expanded", "true");
          }
        });
      }

      function setActiveNav(){
        const file = (window.location.pathname.split("/").pop() || "report.html").toLowerCase();

        // mark active in desktop + mobile
        document.querySelectorAll('[data-page]').forEach(a => {
          const p = (a.getAttribute("data-page") || "").toLowerCase();
          a.classList.toggle("active", p === file);
        });

        // move slider (desktop only)
        const nav = document.querySelector(".nav-links");
        const slider = document.getElementById("navSlider");
        if (!nav || !slider) return;
        if (getComputedStyle(nav).display === "none") return;

        const active = document.querySelector(".nav-links a.active");
        if (!active) return;

        const navRect = nav.getBoundingClientRect();
        const aRect = active.getBoundingClientRect();
        const left = aRect.left - navRect.left;

        slider.style.width = aRect.width + "px";
        slider.style.transform = `translate(${left}px, -50%)`;
        slider.classList.add("ready");
      }

      // run after layout paints so widths are correct
      requestAnimationFrame(setActiveNav);
      window.addEventListener("resize", setActiveNav);
    })();

    /* ---------- REPORT PAGE LOGIC ---------- */
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const step3 = document.getElementById('step3');
    const dot1 = document.getElementById('dot1');
    const dot2 = document.getElementById('dot2');
    const dot3 = document.getElementById('dot3');

    function setStep(n){
      step1.classList.toggle('hidden', n !== 1);
      step2.classList.toggle('hidden', n !== 2);
      step3.classList.toggle('hidden', n !== 3);

      dot1.classList.toggle('active', n === 1);
      dot2.classList.toggle('active', n === 2);
      dot3.classList.toggle('active', n === 3);

      if(n === 3) buildReview();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function showToast(id, msg, ok=true){
      const el = document.getElementById(id);
      el.textContent = msg;
      el.className = "toast " + (ok ? "ok" : "err");
      el.style.display = "block";
      clearTimeout(el._t);
      el._t = setTimeout(() => { el.style.display = "none"; }, 2400);
    }

    const STORAGE_KEY = "guardian_report_draft_v1";
    function loadDraft(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        return raw ? JSON.parse(raw) : null;
      }catch{ return null; }
    }
    function saveDraft(data){ localStorage.setItem(STORAGE_KEY, JSON.stringify(data)); }
    function clearDraft(){ localStorage.removeItem(STORAGE_KEY); }

    let selectedType = null;

    const typeBtns = document.querySelectorAll('.typeBtn');
    const toStep2Btn = document.getElementById('toStep2');

    function typeLabel(type){
      const map = {
        phone:"Phone Call Scam",
        email:"Email/Phishing",
        text:"Text Message Scam",
        website:"Fake Website",
        social:"Social Media Scam",
        other:"Other"
      };
      return map[type] || "Other";
    }

    const fields = {
      scamType: document.getElementById('scamType'),
      dateHappened: document.getElementById('dateHappened'),
      contact: document.getElementById('contact'),
      link: document.getElementById('link'),
      moneyLost: document.getElementById('moneyLost'),
      paymentMethod: document.getElementById('paymentMethod'),
      state: document.getElementById('state'),
      summary: document.getElementById('summary'),
    };

    function collectData(){
      return {
        selectedType,
        scamTypeLabel: fields.scamType.value || (selectedType ? typeLabel(selectedType) : ""),
        dateHappened: fields.dateHappened.value || "",
        contact: fields.contact.value.trim(),
        link: fields.link.value.trim(),
        moneyLost: fields.moneyLost.value || "",
        paymentMethod: fields.paymentMethod.value || "",
        state: fields.state.value.trim(),
        summary: fields.summary.value.trim(),
        createdAt: new Date().toISOString()
      };
    }

    function populateFromDraft(d){
      if(!d) return;
      if(d.selectedType){
        selectedType = d.selectedType;
        toStep2Btn.disabled = false;
        typeBtns.forEach(b => b.classList.toggle('selected', b.dataset.type === selectedType));
        fields.scamType.value = d.scamTypeLabel || typeLabel(selectedType);
      }
      fields.dateHappened.value = d.dateHappened || "";
      fields.contact.value = d.contact || "";
      fields.link.value = d.link || "";
      fields.moneyLost.value = d.moneyLost || "";
      fields.paymentMethod.value = d.paymentMethod || "";
      fields.state.value = d.state || "";
      fields.summary.value = d.summary || "";
    }

    typeBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        typeBtns.forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        selectedType = btn.dataset.type;
        toStep2Btn.disabled = false;

        fields.scamType.value = typeLabel(selectedType);
        saveDraft(collectData());
      });
    });

    document.getElementById('clearDraft1').addEventListener('click', () => {
      clearDraft();
      selectedType = null;
      typeBtns.forEach(b => b.classList.remove('selected'));
      toStep2Btn.disabled = true;
      showToast('toast1', 'Draft cleared.');
    });

    toStep2Btn.addEventListener('click', () => {
      if(!selectedType) return;
      setStep(2);
    });

    Object.values(fields).forEach(el => {
      el.addEventListener('input', () => saveDraft(collectData()));
      el.addEventListener('change', () => saveDraft(collectData()));
    });

    document.getElementById('saveDraft2').addEventListener('click', () => {
      saveDraft(collectData());
      showToast('toast2', 'Draft saved.');
    });

    document.getElementById('backTo1').addEventListener('click', () => setStep(1));
    document.getElementById('toStep3').addEventListener('click', () => {
      const d = collectData();
      if(!d.summary){
        showToast('toast2', 'Please describe what happened (Summary).', false);
        fields.summary.focus();
        return;
      }
      setStep(3);
    });

    function buildReview(){
      const d = collectData();
      const lines = [
        "Guardian AI ‚Äî Scam Report",
        "--------------------------------",
        `Type: ${d.scamTypeLabel || "N/A"}`,
        `Date: ${d.dateHappened || "N/A"}`,
        `Contact: ${d.contact || "N/A"}`,
        `Link: ${d.link || "N/A"}`,
        `Money lost (USD): ${d.moneyLost || "N/A"}`,
        `Payment method: ${d.paymentMethod || "N/A"}`,
        `State: ${d.state || "N/A"}`,
        "",
        "Summary:",
        d.summary || "N/A",
        "",
        `Generated: ${new Date().toLocaleString()}`
      ];
      document.getElementById('reviewBox').textContent = lines.join("\n");
    }

    document.getElementById('copyBtn').addEventListener('click', async () => {
      const text = document.getElementById('reviewBox').textContent;
      try{
        await navigator.clipboard.writeText(text);
        showToast('toast3', 'Copied to clipboard.');
      }catch{
        showToast('toast3', 'Copy failed ‚Äî your browser blocked clipboard access.', false);
      }
    });

    document.getElementById('openFTC').addEventListener('click', () => {
      window.open("https://reportfraud.ftc.gov/", "_blank", "noopener");
    });
    document.getElementById('openIC3').addEventListener('click', () => {
      window.open("https://www.ic3.gov/", "_blank", "noopener");
    });

    document.getElementById('clearAll').addEventListener('click', () => {
      clearDraft();
      selectedType = null;
      typeBtns.forEach(b => b.classList.remove('selected'));
      toStep2Btn.disabled = true;

      Object.values(fields).forEach(el => {
        if(el.tagName === "SELECT") el.value = "";
        else el.value = "";
      });

      setStep(1);
      showToast('toast1', 'Cleared.');
    });

    document.getElementById('backTo2').addEventListener('click', () => setStep(2));

    const draft = loadDraft();
    if(draft) populateFromDraft(draft);
  </script>
</body>
</html>
